---
title: "Biostat 212a Homework 1"
subtitle: "Due Jan 23, 2026 @ 11:59PM"
author: "Charlotte Lee and 206782165"
date: "`r format(Sys.time(), '%d %B, %Y')`"
format:
  html:
    theme: cosmo
    embed-resources: true
    number-sections: true
    toc: true
    toc-depth: 4
    toc-location: left
    code-fold: false
engine: knitr
knitr:
  opts_chunk: 
    fig.align: 'center'
    # fig.width: 6
    # fig.height: 4
    message: FALSE
    cache: false
editor: 
  markdown: 
    wrap: 72
---

## Filling gaps in lecture notes (10% pts)

Consider the regression model $$
Y = f(X) + \epsilon,
$$ where $\operatorname{E}(\epsilon) = 0$.

### Optimal regression function

Show that the choice $$
f_{\text{opt}}(X) = \operatorname{E}(Y | X)
$$ minimizes the mean squared prediction error $$
\operatorname{E}\{[Y - f(X)]^2\},
$$ where the expectations averages over variations in both $X$ and $Y$.
(Hint: condition on $X$.)

### Bias-variance trade-off

Given an estimate $\hat f$ of $f$, show that the test error at a $x_0$
can be decomposed as $$
\operatorname{E}\{[y_0 - \hat f(x_0)]^2\} = \underbrace{\operatorname{Var}(\hat f(x_0)) + [\operatorname{Bias}(\hat f(x_0))]^2}_{\text{MSE of } \hat f(x_0) \text{ for estimating } f(x_0)} + \underbrace{\operatorname{Var}(\epsilon)}_{\text{irreducible}},
$$ where the expectation averages over the variability in $y_0$ and
$\hat f$.

## ISL Exercise 2.4.3 (10% pts)

a\) Provide a sketch of typical (squared) bias, variance, training
error, test error, and Bayes (or irreducible) error curves, on a single
plot, as we go from less flexible statistical learning methods towards
more flexible approaches. The x-axis should represent the amount of
flexibility in the method, and the y-axis should represent the values
for each curve. There should be five curves.

Make sure to label each one.

```{r, eval = F}
library(tidyverse)
library(readr)
advertising <- read.csv("/Users/charlottelee/Documents/BIOSTAT_212A_DS_in_R/ucla_biostat_212A/data/Advertising.csv")
head(advertising)

fit <- lm(sales ~ TV, data = advertising)
summary(fit)
```

\(b\) Explain why each of the five curves has the shape displayed in
part (a).

## ISL Exercise 2.4.4 (10% pts)

a\) Three real-life applications where ***classification*** is useful:
(Describe the response, as well as the predictors. Is the goal of each
application inference or prediction? Explain your answer)

1.   The relationship between being diagnosed with heart disease (yes/no
    outcome) based on their thallium response (predictor 1) and
    cholesterol level (predictor 2). The goal is prediction because we
    are trying to predict whether a patient will be diagnosed with heart
    disease (yes/no) which is a binary categorical outcome.
2.   Whether or not someone survived/died (binary outcome) based on if
    they had lung cancer (predictor 1) and age (predictor 2). The goal
    is prediction because we are trying to predict whether an individual
    will survive/die which is a binary categorical outcome.
3.  The relationship between whether or not someone bought a car (binary
    outcome) based on their annual income amount (predictor 1) and
    respective work location (predictor 2). The goal is prediction
    because we are trying to predict whether or not someone buys/does
    not buy which is a binary categorical outcome.

b\) Three real-life applications where ***regression*** is useful:
(Describe the response, as well as the predictors. Is the goal of each
application inference or prediction? Explain your answer)

1.   The relationship between change in height in milimeters (outcome)
    based on sleep amount (predictor 1) and age (predictor 2).
2.   Measuring the exponential growth rate of a population of wolves.
3.   The relationship between amount of college drop-outs (outcome)
    based on number of resource organizations/programs available
    (predictor 2) and college name (predictor 2).

c\) Three real-life applications where ***cluster analysis*** is useful:

1.  To group properties by price, location or size.
2.  To group students together by region they are from for admission
    bias analysis
3.  To group patients together for clinical trials

## ISL Exercise 2.4.10 (30% pts)

Your can read in the `boston` data set directly from url
<https://raw.githubusercontent.com/ucla-biostat-212a/2026winter/master/slides/data/Boston.csv>.
A documentation of the `boston` data set is
[here](https://www.rdocumentation.org/packages/ISLR2/versions/1.3-2/topics/Boston).

a\) Loading the data.

-   There are originally **506 rows** and 14 columns. However, since the
    given data importing code subtracts one column there are **13
    columns** in the Boston dataset here.

-   The rows represent each observation unit which in this case is a
    **census area suburb unit** or **census** **tract** in Boston, USA.

-   The columns represent **Housing Values in Suburbs of Boston, USA**:

    -   **crim**: per capita crime rate by town

    -   **zn**: proportion of residential land zoned for lots over
        25,000 sq.ft

    -   **indus**: proportion of non-retail business acres per town

    -   **chas:** Charles River dummy variable (= 1 if tract bounds
        river; 0 otherwise)

    -   **nox:** nitrogen oxides concentration (parts per 10 million)

    -   **rm:** average number of rooms per dwelling

    -   **age:** proportion of owner-occupied units built prior to 1940

    -   **dis:** weighted mean of distances to five Boston employment
        centers

    -   **rad:** index of accessibility to radial highways

    -   **tax:** full-value property-tax rate per \$10,000

    -   **ptratio:** pupil-teacher ratio by town

    -   **lstat:** lower status of the population (percent).

    -   **medv:** median value of owner-occupied homes in \$1000s

```{r, evalue = F}
library(tidyverse)

Boston <- read_csv("https://raw.githubusercontent.com/ucla-biostat-212a/2026winter/master/slides/data/Boston.csv", col_select = -1) %>% 
  print(width = Inf)

#dimensions
dim(Boston)

#help center inquiry
??Boston
```

b\) Pairwise scatterplots of the predictors (columns) in this data set.

-   Description of Findings:

    -   All variables, except **chas** (a dummy indicating whether the
        tract borders a river), are highly significantly correlated, as
        indicated by the stars annotating the Pearson correlation
        coefficients in the matrix below.

    -   This makes sense sense because **chas** is a numeric
        categorical, or indicator variable which when measured is
        automatically constrained by 0/1 only and would inevitably have
        smaller variance mathematically.

    -   Once **chas** is removed, all remaining variables have
        statistically significant correlations (p \< 0.001).

```{r, warning = F, eval = F}
library(ggplot2)
library(GGally)
library(dplyr)

#ggpairs function gives correlation matrix
pairwise_scatterplots <-GGally::ggpairs(Boston, progress=FALSE, main= "Pairs Plot of Boston Census Database")
pairwise_scatterplots

#ggsave("plots/pairs_all.png", pairwise_scatterplots, width = 20, height = 20, units = "in", dpi = 150)


no_dummy <- Boston %>%
  select(-chas)
pairwise_scatterplots <-GGally::ggpairs(no_dummy, progress= FALSE, main="Pairs Plot of Boston Census Database")
pairwise_scatterplots 

#ggsave("plots/pairs_no_chas.png", pairwise_scatterplots, width = 20, height = 20, units = "in", dpi = 150)

```

c\) Are any of the predictors associated with per capita crime rate?

If so, explain the relationship.

```{r}

```

d\) Do any of the census tracts of Boston appear to have particularly
high crime rates? Tax rates ? Pupil-teacher ratios? Comment on the range
of each predictor

```{r}

```

e\) How many of the census tracts in this data set bound the Charles
river?

```{r}

```

f\) What is the median pupil-teacher ratio among the towns in this data
set?

```{r}

```

g\) Which census tract of Boston has lowest median value of
owneroccupied homes? What are the values of the other predictors for
that census tract, and how do those values compare to the overall ranges
for those predictors? Comment on your findings.

```{r}

```

h\) In this data set, how many of the census tracts average more than
seven rooms per dwelling?More than eight rooms per dwelling? Comment on
the census tracts that average more than eight rooms per dwelling

```{r}

```

## ISL Exercise 3.7.3 (20% pts)

```{r}

```

## ISL Exercise 3.7.15 (20% pts)

```{r}

```

## Bonus question (Extra credits)

For multiple linear regression, show that $R^2$ is equal to the
correlation between the response vector
$\mathbf{y} = (y_1, \ldots, y_n)^T$ and the fitted values
$\hat{\mathbf{y}} = (\hat y_1, \ldots, \hat y_n)^T$. That is $$
R^2 = 1 - \frac{\text{RSS}}{\text{TSS}} = [\operatorname{Cor}(\mathbf{y}, \hat{\mathbf{y}})]^2.
$$
